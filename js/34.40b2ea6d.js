"use strict";(self["webpackChunktilda_clone"]=self["webpackChunktilda_clone"]||[]).push([[34],{714:function(t,e,o){o.d(e,{Z:function(){return J}});var i=o(252),l=o(577),c=o(732);const n={class:"page-blocks"},s={class:"tools"},a=(0,i._)("div",{class:"tools__left"},[(0,i._)("div",{class:"buttons-group"},[(0,i._)("button",{class:"buttons-group__button"},[(0,i._)("svg",{class:"icon icon-text",width:"24",height:"24","aria-hidden":"true",role:"img"},[(0,i._)("use",{href:"#settings-icon"})]),(0,i.Uk)(" Настройки ")]),(0,i._)("button",{class:"buttons-group__button apply"},[(0,i._)("svg",{class:"icon icon-text",width:"24",height:"24","aria-hidden":"true",role:"img"},[(0,i._)("use",{href:"#edit-icon"})]),(0,i.Uk)(" Контент ")])])],-1),d={class:"tools__right"},r={class:"buttons-group"},u=["onClick"],k=(0,i._)("svg",{class:"icon",width:"24",height:"24","aria-hidden":"true",role:"img"},[(0,i._)("use",{href:"#duplicate-icon"})],-1),p=[k],g=["onClick"],h=(0,i._)("svg",{class:"icon",width:"24",height:"24","aria-hidden":"true",role:"img"},[(0,i._)("use",{href:"#trash-icon"})],-1),b=[h],B=["onClick"],_=(0,i._)("svg",{class:"icon",width:"24",height:"24","aria-hidden":"true",role:"img"},[(0,i._)("use",{href:"#power-icon"})],-1),m=[_],v={class:"buttons-group"},w=["onClick"],f=(0,i._)("svg",{class:"icon",width:"24",height:"24","aria-hidden":"true",role:"img"},[(0,i._)("use",{href:"#move-up-icon"})],-1),D=[f],I=["onClick"],y=(0,i._)("svg",{class:"icon",width:"24",height:"24","aria-hidden":"true",role:"img"},[(0,i._)("use",{href:"#move-down-icon"})],-1),O=[y],x={key:2,class:"hidden-block"},T=(0,i._)("h6",null,'Блок скрыт. Нажмите кнопку "Спрятать / Показать" справа, чтобы сделать его видимым.',-1),C=[T],M=["onClick"],N=(0,i._)("img",{src:c,class:"add-button__icon",alt:"create new page"},null,-1),S=[N];function H(t,e,o,c,k,h){const _=(0,i.up)("TextBlock"),f=(0,i.up)("BackgroundImageBlock");return(0,i.wg)(),(0,i.iD)("div",n,[o.blocks.length?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("button",{key:0,class:"page-blocks__button button apply",onClick:e[0]||(e[0]=(...t)=>h.addNewNoteButtonHandler&&h.addNewNoteButtonHandler(...t))}," Добавить запись ")),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.blocks,((e,c)=>((0,i.wg)(),(0,i.iD)("div",{key:e.id,class:"page-blocks__block"},[(0,i._)("div",s,[a,(0,i._)("div",d,[(0,i._)("div",r,[(0,i._)("button",{class:"buttons-group__button","aria-label":"Clone block",onClick:t=>h.optionButtonHandler(e.code,e)},p,8,u),(0,i._)("button",{class:"buttons-group__button","aria-label":"Delete block",onClick:t=>h.removeBlockButtonHandler(e.id)},b,8,g),(0,i._)("button",{class:"buttons-group__button","aria-label":"Hide block",onClick:o=>t.changeBlockVisibility(e.id)},m,8,B)]),(0,i._)("div",v,[0!==c?((0,i.wg)(),(0,i.iD)("button",{key:0,class:"buttons-group__button","aria-label":"Move block up",onClick:t=>h.moveBlockButtonHandler(c,"up")},D,8,w)):(0,i.kq)("",!0),c!==o.blocks.length-1?((0,i.wg)(),(0,i.iD)("button",{key:1,class:"buttons-group__button","aria-label":"Move block down",onClick:t=>h.moveBlockButtonHandler(c,"down")},O,8,I)):(0,i.kq)("",!0)])])]),1!==e.code||e.hidden?2!==e.code||e.hidden?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(f,{key:1,"block-id":e.id},{title:(0,i.w5)((()=>[(0,i.Uk)((0,l.zw)(e.title),1)])),description:(0,i.w5)((()=>[(0,i.Uk)((0,l.zw)(e.description),1)])),_:2},1032,["block-id"])):((0,i.wg)(),(0,i.j4)(_,{key:0,"block-id":e.id},{title:(0,i.w5)((()=>[(0,i.Uk)((0,l.zw)(e.title),1)])),description:(0,i.w5)((()=>[(0,i.Uk)((0,l.zw)(e.description),1)])),_:2},1032,["block-id"])),e.hidden?((0,i.wg)(),(0,i.iD)("div",x,C)):(0,i.kq)("",!0),(0,i._)("button",{class:"add-button",onClick:t=>h.addNewNoteButtonHandler(c)},S,8,M)])))),128))])}const $={class:"background-image-block",style:{"background-image":"url('tilda-vue/img/page-img.jpg')"}},P={class:"background-image-block__text"};function j(t,e,o,l,c,n){return(0,i.wg)(),(0,i.iD)("section",$,[(0,i._)("div",P,[(0,i._)("h1",{class:"title",contenteditable:"true",onBlur:e[0]||(e[0]=(...t)=>n.changeBlockTitle&&n.changeBlockTitle(...t))},[(0,i.WI)(t.$slots,"title")],32),(0,i._)("p",{class:"description",contenteditable:"true",onBlur:e[1]||(e[1]=(...t)=>n.changeBlockDescription&&n.changeBlockDescription(...t))},[(0,i.WI)(t.$slots,"description")],32)])])}var U=o(907),W={name:"BackgroundImageBlock",props:{blockId:{type:Number,default:0}},methods:{...(0,U.OI)(["setBlockTitle","setBlockDescription"]),changeBlockTitle(t){let e={id:this.blockId,title:t.target.innerText};this.setBlockTitle(e)},changeBlockDescription(t){let e={id:this.blockId,description:t.target.innerText};this.setBlockDescription(e)}}},Z=o(744);const q=(0,Z.Z)(W,[["render",j]]);var z=q;const L={class:"text-block"},V={class:"text"};function A(t,e,o,l,c,n){return(0,i.wg)(),(0,i.iD)("div",L,[(0,i._)("div",V,[(0,i._)("h2",{class:"text__title",contenteditable:"true",onBlur:e[0]||(e[0]=(...t)=>n.changeBlockTitle&&n.changeBlockTitle(...t))},[(0,i.WI)(t.$slots,"title")],32),(0,i._)("p",{class:"text__description",contenteditable:"true",onBlur:e[1]||(e[1]=(...t)=>n.changeBlockDescription&&n.changeBlockDescription(...t))},[(0,i.WI)(t.$slots,"description")],32)])])}var K={name:"TextBlock",props:{blockId:{type:Number,default:0}},methods:{...(0,U.OI)(["setBlockTitle","setBlockDescription"]),changeBlockTitle(t){let e={id:this.blockId,title:t.target.innerText};this.setBlockTitle(e)},changeBlockDescription(t){let e={id:this.blockId,description:t.target.innerText};this.setBlockDescription(e)}}};const Y=(0,Z.Z)(K,[["render",A]]);var E=Y,F={name:"PageLayout",components:{BackgroundImageBlock:z,TextBlock:E},props:{blocks:{type:Array,default(){return[]}},activeOptionsModalSection:{type:Number,default:0}},computed:{...(0,U.Se)(["getOptionsModalSections","getOptionsModalState","getSelectedBlock"])},emits:{closeOptionsModal:null,updateBlocks:null},methods:{...(0,U.OI)(["setOptionsModalSections","setOptionsModalOptions","setSelectedBlock","addNewBlock","removeBlock","moveBlock","changeBlockVisibility"]),addNewNoteButtonHandler(t){this.setOptionsModalSections([{title:"Текстовые блоки",code:1,options:[{title:"Блок с текстом",code:1,description:"Блок, содержащий простой текст"}]},{title:"Обложки",code:2,options:[{title:"Текст с фоновой картинкой",code:2,description:"Блок, содержащий текст на фоне картинки"}]}]),this.setSelectedBlock(t),this.setOptionsModalOptions(this.getOptionsModalSections.find((t=>t.code===this.activeOptionsModalSection)).options),this.$emit("closeOptionsModal")},optionButtonHandler(t,e={}){this.addNewBlock({code:t,index:this.getSelectedBlock,duplicateBlock:e}),this.getOptionsModalState&&this.$emit("closeOptionsModal")},removeBlockButtonHandler(t){this.removeBlock(t),this.$emit("updateBlocks")},moveBlockButtonHandler(t,e){this.moveBlock({index:t,direction:e})}}};const G=(0,Z.Z)(F,[["render",H]]);var J=G},34:function(t,e,o){o.r(e),o.d(e,{default:function(){return k}});var i=o(252);const l={class:"preview-page"},c=(0,i.Uk)(" Вернуться к редактированию ");function n(t,e,o,n,s,a){const d=(0,i.up)("PageLayout"),r=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",l,[(0,i.Wm)(d,{blocks:t.getPageBlocksData},null,8,["blocks"]),(0,i.Wm)(r,{to:`/project/${t.$route.params.projectId}/edit/${t.$route.params.pageId}`,class:"back"},{default:(0,i.w5)((()=>[c])),_:1},8,["to"])])}var s=o(714),a=o(907),d={name:"PreviewPage",components:{PageLayout:s.Z},methods:{...(0,a.nv)(["fetchPageBlocksData"]),...(0,a.OI)(["updatePageBlocksData"])},computed:{...(0,a.Se)(["getPageBlocksData"])},mounted(){let t={projectId:Number(this.$route.params.projectId),pageId:Number(this.$route.params.pageId)};this.fetchPageBlocksData(t)}},r=o(744);const u=(0,r.Z)(d,[["render",n]]);var k=u},732:function(t,e,o){t.exports=o.p+"img/plus.053d5610.svg"}}]);
//# sourceMappingURL=34.40b2ea6d.js.map